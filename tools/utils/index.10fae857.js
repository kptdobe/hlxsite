function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=t.parcelRequire99f1;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw (r.code="MODULE_NOT_FOUND", r)}).register=function(e,t){i[e]=t},t.parcelRequire99f1=o),o.register("3eT87",(function(t,n){e(t.exports,"attachOptionFieldsListeners",(()=>o)),e(t.exports,"initOptionFields",(()=>r));const i=e=>document.querySelectorAll(`${e} .optionField`),o=(e,t)=>{i(t).forEach((t=>{t.addEventListener("change",(()=>{const n="checkbox"===t.type?t.checked:t.value;e[t.id]=n,localStorage.setItem(`option-field-${t.id}`,n)}))}))},r=e=>{const t={};return i(e).forEach((e=>{const n=localStorage.getItem(`option-field-${e.id}`);null!==n&&("checkbox"===e.type?e.checked="true"===n:e.value=n),t[e.id]="checkbox"===e.type?e.checked:e.value})),t}})),o.register("baa6D",(function(t,n){function i(e,t=!1,n=1){let i=e;const o=t?1e3:1024;if(Math.abs(e)<o)return`${e} B`;const r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let a=-1;const s=10**n;do{i/=o,a+=1}while(Math.round(Math.abs(i)*s)/s>=o&&a<r.length-1);return`${i.toFixed(n)} ${r[a]}`}function o(e){const t=new URL(e),n=t.host.split("--"),i=n[2].split(".")[0];return{ref:n[0],repo:n[1],owner:i,path:t.pathname,host:t.hostname}}e(t.exports,"humanFileSize",(()=>i)),e(t.exports,"toHelixConfig",(()=>o))}));var r=o("3eT87");async function a(e,t){const n=new URL(e,t),i=await fetch(`${t}${n.pathname}${n.search}`);if(i.ok){const e=await i.text(),n=(new window.DOMParser).parseFromString(e,"text/xml"),o=[...n.querySelectorAll("sitemap loc")];let r=[];const s=o.map((e=>new Promise((n=>{a(new URL(e.textContent,t).pathname,t).then((e=>{r=r.concat(e),n(!0)}))}))));await Promise.all(s);return n.querySelectorAll("url loc").forEach((e=>{const n=new URL(e.textContent,t);r.push(n.toString())})),r}return[]}var s=o("baa6D");async function c(e,t,n,i){const o=t.shift();if(o){const r=await async function(e,t,n){const i=new URL(e);let o=i.pathname;o.endsWith("/")&&(o=`${o}index`);const r=await fetch(`${t}${o}.md`);let a=!1;(await r.text()).indexOf(n)>=0&&(a=!0);const{status:s}=r;return{found:a,size:+r.headers.get("content-length"),status:s,pathname:i.pathname,url:`${t}${i.pathname}`}}(o,e,n);if(i&&i(r),t[0])return c(e,t,n,i)}}async function l(e,t,n,i,o){return async function(e,t,n,i,o){const r=[...e],a=[];for(let e=0;e<i;e+=1)a.push(c(t,r,n,o));await Promise.all(a)}(e,t,n,i,o)}const u=document.querySelector(".search #searchButton"),d=document.querySelector(".search #searchStatus"),h=document.querySelector(".search #searchResults"),p={};let f=0,m=0,w=0,b=0,g=new Date,$=0;function x(e){if(f+=e.size,w+=1,b+=e.found?1:0,e.found){const t=document.createElement("p");t.innerHTML=`${s.humanFileSize(e.size,!0).padStart(9," ")} `;const n=document.createElement("sp-link");n.setAttribute("size","m"),n.setAttribute("target","_blank"),n.setAttribute("href",e.url),n.innerHTML=e.pathname,t.append(n),t.innerHTML+=` (${e.status})`;const i=document.createElement("sp-action-button");i.setAttribute("size","m"),i.innerHTML='<sp-icon-edit slot="icon"></sp-icon-edit>',i.onclick=()=>(async function(e, t) {try{const n=s.toHelixConfig(e),i=await fetch(`https://admin.hlx.page/status/${n.owner}/${n.repo}/${n.ref}${n.path}?editUrl=auto`),o=await i.json(),r=o.edit&&o.edit.url;if(t&&window.scrollTo(0,t),!r)throw new Error("admin did not return an edit url");window.open(r)}catch(e){console.log(`failed to get edit url for ${path}`,e),alert(`failed to get edit url for ${path}`)}})(e.url,window.scrollY),t.append(" ",i),h.appendChild(t)}}function y(e){x(e),$=new Date,function(){const e=Math.floor(($-g)/100)/10;let t=d.querySelector("sp-progress-bar"),n=d.querySelector("div");t||(t=document.createElement("sp-progress-bar"),t.setAttribute("size","m"),t.setAttribute("label","Searching..."),d.appendChild(t),n=document.createElement("div"),d.appendChild(n)),w===m&&t.setAttribute("label","Done."),t.setAttribute("progress",Math.floor(100*w/m)),n.innerHTML=`Matched Files: ${b} / ${m} (${s.humanFileSize(f,!0)}) ${e}s`}()}async function B(){u.setAttribute("disabled","true"),f=0,m=0,w=0,b=0,g=new Date,$=new Date,h.textContent="";let e=p.fields.searchRootPath;e&&"/"!==e||(e="");const t=p.fields.searchIn||"/",n=await a(`${e}/sitemap.xml`,p.fields.searchHost);let i=p.fields.searchFor,o=10;i.includes(" -c ")&&([i,o]=i.split(" -c "));const r=n.filter((e=>new URL(e).pathname.startsWith(t)));m=r.length,await l(r,p.fields.searchHost,i,+o,y),u.removeAttribute("disabled")}p.fields=r.initOptionFields(".search"),r.attachOptionFieldsListeners(p.fields,".search"),u.addEventListener("click",B);
//# sourceMappingURL=index.10fae857.js.map
