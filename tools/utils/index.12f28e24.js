var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire99f1;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw (a.code="MODULE_NOT_FOUND", a)}).register=function(e,t){n[e]=t},e.parcelRequire99f1=i);var r=i("3eT87"),a=i("baa6D");const s=async(e,t,n)=>{const i=e.length;let r=0;const s=async e=>{const s=a.toHelixConfig(e),l=`https://admin.hlx.page/${t}/${s.owner}/${s.repo}/${s.ref}${s.path}`,o=await fetch(l,{method:"POST"}),p=await o.json();r+=1,n&&n.call(null,e,t,r,i,l,p)},l=async()=>{for(;e.length;){const t=e.shift();await s(t)}},o="live"===t?40:5,p=[];for(let e=0;e<o;e+=1)p.push(l());await Promise.all(p)},l=document.querySelector(".pp #previewButton"),o=document.querySelector(".pp #publishButton"),p=document.querySelector(".pp #ppButton"),c=document.getElementById("ppStatus"),d=document.getElementById("ppResults"),u={},f=()=>u.fields.ppURLs.split("\n").map((e=>e.trim())),w=()=>{c.innerHTML="",d.innerHTML=""},m=(e,t,n)=>{let i=c.querySelector("sp-progress-bar"),r=c.querySelector("div");i||(i=document.createElement("sp-progress-bar"),i.setAttribute("size","m"),i.setAttribute("label",`${e} in progress...`),c.appendChild(i),r=document.createElement("div"),c.appendChild(r)),t===n&&i.setAttribute("label",`${e} done.`),i.setAttribute("progress",Math.floor(100*t/n)),r.innerHTML=`${e}: ${t} / ${n}`},h=(e,t,n)=>{const i=document.createElement("p");i.innerHTML=`${t} / ${e}: `;const r=document.createElement("sp-link");r.setAttribute("size","m"),r.setAttribute("target","_blank"),r.setAttribute("href",n),r.innerHTML=n,i.append(r),d.appendChild(i)},y=async()=>{const e=f();await(async(e,t)=>{await s(e,"preview",t)})(e,((e,t,n,i,r,a)=>{m("Preview",n,i),h("Preview",n,a.preview.url)}))},b=async()=>{const e=f();await(async(e,t)=>{await s(e,"live",t)})(e,((e,t,n,i,r,a)=>{m("Publish",n,i),h("Publish",n,a.live.url)}))};u.fields=r.initOptionFields(".pp"),r.attachOptionFieldsListeners(u.fields,".pp"),l.addEventListener("click",(async()=>{w(),await y()})),o.addEventListener("click",(async()=>{w(),await b()})),p.addEventListener("click",(async()=>{w(),await y(),await b()}));
//# sourceMappingURL=index.12f28e24.js.map
