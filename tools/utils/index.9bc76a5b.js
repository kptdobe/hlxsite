function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequire99f1;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},t.parcelRequire99f1=i),i.register("3eT87",(function(t,n){e(t.exports,"attachOptionFieldsListeners",(()=>i)),e(t.exports,"initOptionFields",(()=>r));const o=e=>document.querySelectorAll(`${e} .optionField`),i=(e,t)=>{o(t).forEach((t=>{t.addEventListener("change",(()=>{const n="checkbox"===t.type?t.checked:t.value;e[t.id]=n,localStorage.setItem(`option-field-${t.id}`,n)}))}))},r=e=>{const t={};return o(e).forEach((e=>{const n=localStorage.getItem(`option-field-${e.id}`);null!==n&&("checkbox"===e.type?e.checked="true"===n:e.value=n),t[e.id]="checkbox"===e.type?e.checked:e.value})),t}})),i.register("baa6D",(function(t,n){function o(e,t=!1,n=1){let o=e;const i=t?1e3:1024;if(Math.abs(e)<i)return`${e} B`;const r=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let a=-1;const s=10**n;do{o/=i,a+=1}while(Math.round(Math.abs(o)*s)/s>=i&&a<r.length-1);return`${o.toFixed(n)} ${r[a]}`}function i(e){const t=new URL(e),n=t.host.split("--"),o=n[2].split(".")[0];return{ref:n[0],repo:n[1],owner:o,path:t.pathname,host:t.hostname}}e(t.exports,"humanFileSize",(()=>o)),e(t.exports,"toHelixConfig",(()=>i))}));var r=i("3eT87");async function a(e,t){const n=new URL(e,t),o=await fetch(`${t}${n.pathname}${n.search}`);if(o.ok){const e=await o.text(),n=(new window.DOMParser).parseFromString(e,"text/xml"),i=[...n.querySelectorAll("sitemap loc")];let r=[];const s=i.map((e=>new Promise((n=>{a(new URL(e.textContent,t).pathname,t).then((e=>{r=r.concat(e),n(!0)}))}))));await Promise.all(s);return n.querySelectorAll("url loc").forEach((e=>{const n=new URL(e.textContent,t);r.push(n.toString())})),r}return[]}var s=i("baa6D");async function c(e,t,n,o){const i=t.shift();i&&async function(e,t,n){const o=new URL(e);let i=o.pathname;i.endsWith("/")&&(i=`${i}index`);const r=await fetch(`${t}${i}.md`);let a=!1;(await r.text()).indexOf(n)>=0&&(a=!0);const{status:s}=r;return{found:a,size:+r.headers.get("content-length"),status:s,pathname:o.pathname,url:`${t}${o.pathname}`}}(i,e,n).then((i=>{o&&o(i),t[0]&&c(e,t,n,o)}))}async function l(e,t,n,o,i){return async function(e,t,n,o,i){const r=[...e];for(let e=0;e<o;e+=1)c(t,r,n,i)}(e,t,n,o,i)}const u=document.querySelector(".search #searchButton"),d=document.querySelector(".search #searchStatus"),h=document.querySelector(".search #searchResults"),p={};let f=0,m=0,w=0,g=0,$=new Date,b=0;function x(e){if(f+=e.size,w+=1,g+=e.found?1:0,e.found){const t=document.createElement("p");t.innerHTML=`${s.humanFileSize(e.size,!0).padStart(9," ")} `;const n=document.createElement("sp-link");n.setAttribute("size","m"),n.setAttribute("target","_blank"),n.setAttribute("href",e.url),n.innerHTML=e.pathname,t.append(n),t.innerHTML+=` (${e.status})`;const o=document.createElement("sp-action-button");o.setAttribute("size","m"),o.innerHTML='<sp-icon-edit slot="icon"></sp-icon-edit>',o.onclick=()=>async function(e,t){try{const n=s.toHelixConfig(e),o=await fetch(`https://admin.hlx.page/status/${n.owner}/${n.repo}/${n.ref}${n.path}?editUrl=auto`),i=await o.json(),r=i.edit&&i.edit.url;if(t&&window.scrollTo(0,t),!r)throw new Error("admin did not return an edit url");window.open(r)}catch(e){console.log(`failed to get edit url for ${path}`,e),alert(`failed to get edit url for ${path}`)}}(e.url,window.scrollY),t.append(" ",o),h.appendChild(t)}}function y(e){x(e),b=new Date,function(){const e=Math.floor((b-$)/100)/10;let t=d.querySelector("sp-progress-bar"),n=d.querySelector("div");t||(t=document.createElement("sp-progress-bar"),t.setAttribute("size","m"),t.setAttribute("label","Searching..."),d.appendChild(t),n=document.createElement("div"),d.appendChild(n)),w===m&&t.setAttribute("label","Done."),t.setAttribute("progress",Math.floor(100*w/m)),n.innerHTML=`Matched Files: ${g} / ${m} (${s.humanFileSize(f,!0)}) ${e}s`}()}async function B(){f=0,m=0,w=0,g=0,$=new Date,b=new Date,h.textContent="";let e=p.fields.searchRootPath;e&&"/"!==e||(e="");const t=p.fields.searchIn||"/",n=await a(`${e}/sitemap.xml`,p.fields.searchHost);let o=p.fields.searchFor,i=10;o.includes(" -c ")&&([o,i]=o.split(" -c "));const r=n.filter((n=>new URL(n).pathname.startsWith(`${e}${t}`)));m=r.length,await l(r,p.fields.searchHost,o,+i,y)}p.fields=r.initOptionFields(".search"),r.attachOptionFieldsListeners(p.fields,".search"),u.addEventListener("click",B);
//# sourceMappingURL=index.9bc76a5b.js.map
